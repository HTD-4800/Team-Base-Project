{% extends "FindMyFurryFriend/base.html" %}

{% block title %}Lost Pet Detail{% endblock %}

{% block content %}
<h1>Lost Pet Detail</h1>
<div>
  <h2>Name: {{ pet.name }}</h2>
  <p>Species: {{ pet.species }}</p>
  <p>Description: {{ pet.description }}</p>
  {% if image_url %}
  <img src="{{ image_url }}" alt="{{ pet.name }}">
  {% endif %}

</div>

<!-- Display the map -->
<div id="map" style="width: 100%; height: 300px;"></div>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  
    // Get the latitude and longitude from the Django model instance
    var latitude = {{ pet.latitude }};
    var longitude = {{ pet.longitude }};

    console.log('Latitude:', latitude);
    console.log('Longitude:', longitude);

    // Check if latitude and longitude are valid numbers
    if (typeof latitude === 'number' && typeof longitude === 'number' && !isNaN(latitude) && !isNaN(longitude)) {
      // Initialize the map
      var map = L.map('map').setView([latitude, longitude], 15);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

      // Add a marker to the map
      L.marker([latitude, longitude]).addTo(map)
          .bindPopup(`Latitude: ${latitude}, Longitude: ${longitude}`);
  } else {
      console.error('Invalid latitude or longitude values.');
  }
</script>

<a href="{% url 'lost_pet_list' %}">Back to Lost Pets</a>
{% endblock %}


